\documentclass[a4paper,11pt]{article}
\usepackage{amssymb, enumitem}
\setlist[enumerate,1]{label={\bfseries\arabic*.},ref={\bfseries{Ejercicio \arabic*}}}
\setlist[enumerate,2]{label={\bfseries(\alph*)},ref={\bfseries(\alph*)}}


\parindent 0cm
\usepackage{amssymb,amsmath,amsthm,latexsym,epsfig,euscript,multicol}
\usepackage{graphbox}

\usepackage[utf8x]{inputenc}
\usepackage{listings,xcolor,bm}


\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\lstset{
  backgroundcolor=\color{white},   % choose the background color; you must add
  basicstyle=\ttfamily,      % the size of the fonts that are used for the code
  breakatwhitespace=true,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{mygreen},    % comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  firstnumber=1,                % start line enumeration with line 1000
  frame=single,	                   % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{blue},       % keyword style
  language=Python,                 % the language of the code
  morekeywords={*,...},            % if you want to add more keywords to the set
  numbers=none,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=5,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{mymauve},     % string literal style
  tabsize=4,	                   % sets default tabsize to 2 spaces
  title=\lstname,                  % show the filename of files included with \lstinputlisting; also try caption instead of title
  belowskip=0em
}
% Caracteres especiales
\def\A{\mathbb{A}}
\def\C{\mathbb{C}}
\def \N{\mathbb{N}}
\def \P{\mathbb{P}}
\def \Q{\mathbb{Q}}
\def \R{\mathbb{R}}
\def \Z{\mathbb{Z}}
\def \sen{\textrm{sen}}

\def\Np{$\N$}
\def\Zp{$\Z$}
\def\Qp{$\Q$}
\def\Rp{$\R$}
\def\Cp{$\C$}

\def\bb{\bm{b}}
\def\bu{\bm{u}}
\def\bv{\bm{v}}
\def\bx{\bm{x}}
\def\bA{\bm{A}}
\def\bB{\bm{B}}
\def\bD{\bm{D}}
\def\bE{\bm{E}}
\def\bM{\bm{M}}
\def\bT{\bm{T}}


\def\K{\textrm{K}}
\def\V{\textrm{V}}
\def\S{\textrm{S}}

\def\degres{$^\circ$}

\newcount\todno
\def\no{\global\advance\todno by 1 \the\todno}

\topmargin-2cm \vsize 29.5cm \hsize 21cm
\setlength{\textwidth}{16.75cm}\setlength{\textheight}{23.5cm}
\setlength{\oddsidemargin}{0.0cm}
\setlength{\evensidemargin}{0.0cm}


\theoremstyle{definition}
\newtheorem{ejer}{Ejercicio}
\newcommand{\bej}{\begin{ejer}}
\newcommand{\fej}{\end{ejer}}

\begin{document}

\centerline{{\small Universidad de Buenos Aires - Facultad de Ciencias Exactas y Naturales - Ciencias de Datos}}

\vskip 0.2cm

\hrule

\vskip 0.2cm

 \centerline{{\bf\Large{\sc Laboratorio de Datos}}}

 \vskip 0.2cm

 \centerline{\ttfamily Primer Cuatrimestre 2024}

\vskip 0.2cm

 \hrule

 \bigskip
 \centerline{\bf Práctica N$^\circ$ 5: Modelo lineal multivariado. Entrenamiento y testeo.}
 \bigskip


% \textbf{\large Visualizaci\'on}

Para estos ejercicios, usar el dataset \lstinline{penguins}.

\begin{enumerate}

\item Crear un subconjunto de datos que contenga sólo ping\"uinos de la isla Biscoe y que tengan un pico de 48 mm de largo o más.
\item Crear otro dataset con la información de ping\"uinos Adelie machos que no hayan sido vistos en el año 2008.
\item Del dataset \lstinline{penguins} quedarse con todas las variables excepto \lstinline{year}, \lstinline{sex} y \lstinline{body_mass_g}.
\item Crear un subconjunto de los datos de penguins sólo con las obsevaciones de ping\"uinos machos con aletas (flipper) de más de 200 mm de largo y quedarse con todas las columnas que terminan con “mm”. (Ayuda: pueden utilizar el método \lstinline{endswith()} aplicado al string.)


\item Empezando con \lstinline{penguins}, hacer un pipe (mediante el método \lstinline{pipe} de DataFrames) que:
\begin{enumerate}
\item se quede sólo con las observaciones de la isla Dream.
\item se quede con las variables species y todas las que empiecen con bill.
\end{enumerate}

\item Convertir todas las variables que empiezan con bill a mayúsculas. (Ayuda: \lstinline{rename()} y \lstinline{upper()}.)

\item Empezando con \lstinline{penguins} hacer las siguientes operaciones utilizando \lstinline{transform()}:
\begin{enumerate}
\item Crear una nueva variable que tenga el peso en Kg.
\item Convertir la variable island a minúscula.
\end{enumerate}

\item Empezando con \lstinline{penguins} crear una tabla resumen que contenga para el largo mínimo y máximo de las aletas de los ping\"uinos Adelie, agrupados por isla.

\item Empezando con \lstinline{penguins}, agrupar los datos por especie y año, luego crear una tabla de resumen que contenga el ancho del pico (llamarla \lstinline{bill_depth_mean}) y el largo del pico (llamarla \lstinline{bill_length_mean}) para cada grupo

\item Empezando con \lstinline{penguins}, hacer una secuencia de operaciones \lstinline{pipe} que:
\begin{enumerate}
\item Agregue una nueva columna llamada \lstinline{bill_ratio} que sea el cociente entre el largo y el ancho del pico.
\item Quedarse sólo con las columnas species y \lstinline{bill_ratio}.
\item Agrupar los datos por especie.
\item Crear una tabla de resumen que contenga el promedio de la variable \lstinline{bill_ratio} por especie y que el nombre de la columna en la tabla sea \lstinline{bill_ratio_mean}).
\end{enumerate}

\item Usar el método \lstinline{rename()} de DataFrames para cambiarle el nombre a la variable \lstinline{body_mass_g} y llamarla \lstinline{masa_corporal_g}.

\item Calcular la mediana de la masa corporal de los ping\"uinos de cada especie usando \lstinline{group_by()} y \lstinline{summarise()}.

\item Empezando con \lstinline{penguins}, escribir una secuencia de operaciones \lstinline{pipe} que:
\begin{enumerate}
\item Excluya a los ping\"uinos observados en la isla Biscoe.
\item Sólo se quede con las variables que están entre species y \lstinline{body_mass_g} inclusive.
\item Renombrar la variable species a \lstinline{especie_pinguino}.
\item Agrupar los datos por la variable \lstinline{especie_pinguino}.
\item Encontrar el valor medio de las variables que contienen el string ``length'', separando por la especie del ping\"uino, y llamando a las columnas como las originales pero agregando ``\_mean'' al final.
\end{enumerate}

\item Empezando con \lstinline{penguins}, contar cuántas observaciones hay por especie, isla y año.

\item Empezando con \lstinline{penguins}, quedarse sólo con los ping\"uinos de las especies Adelie y Gentoo. Luego contar cuántos hay por cada especie y sexo.

\item Agregar una nueva columna a la base de datos llamada \lstinline{peso_bin} que contenga:
\begin{itemize}
\item ``chico'' si la masa corporal es menos que 4000 gramos.
\item ``grande'' si la masa corporal es mayor que 4000 gramos.
\end{itemize}

\item Empezando con \lstinline{penguins},

\begin{enumerate}
\item Quedarse sólo con las observaciones correspondientes a ping\"uinos Chinstrap.
\item Luego, quedarse sólo con las variables \lstinline{flipper_length_mm} y \lstinline{body_mass_g}.
\item Agregar una nueva columna llamada \lstinline{fm_ratio} que contenga el cociente entre el largo de la aleta y el peso del ping\"uino.
\item Luego quedarse solo con las observaciones que no tienen NaN en ninguna columna (ayuda: \lstinline{drop_na()})
\item Agregar otra columna llamada \lstinline{ratio_bin} que contenga la palabra ``alto'' si \lstinline{fm_ratio} es mayor o igual que $0.05$ y ``bajo'' si el cociente es menor que $0.05$.
\end{enumerate}

\end{enumerate}

\end{document}

